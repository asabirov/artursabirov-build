<!DOCTYPE html>
<html dir='ltr' lang='ru-RU'>
  <head>
    <meta charset='utf-8'>
    <title>Growing Rails Applications in Practice</title>
    <link href='http://feeds.feedburner.com/artursabirov' rel='alternate' title='ArturSabirov.ru' type='application/rss+xml'>
    <link href="/stylesheets/blog.css" media="screen" rel="stylesheet" type="text/css" />
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script charset='windows-1251' src='http://vkontakte.ru/js/api/openapi.js?29' type='text/javascript'></script>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="http://feeds.feedburner.com/artursabirov//books" />
    <script>
      VK.init({apiId: 2348265, onlyWidgets: true});
    </script>
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-24946626-1']);
      _gaq.push(['_trackPageview']);
      
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <header>
      <section>
        <h1 id='page_heading'>
          <a href='/'>Блог Артура Сабирова</a>
        </h1>
        <nav>
          <a href="/dev">Разработка</a>
          <a href="/projects">Проекты</a>
          <a href="/books">Книги</a>
          <a href="/life">Жизнь</a>
          <a href="/about">О себе</a>
        </nav>
      </section>
    </header>
    <section id='single-column'>
      <article>
        <section class='book-review'>
          <h1>Growing Rails Applications in Practice</h1>
          <a class='cover' href='/images/books/growing-rails-application-in-practice.png' rel='lightbox'>
            <img src="/images/books/growing-rails-application-in-practice.png" />
          </a>
          <p>Rails проекты могут вырастать до огромных размеров. Держать код руководствуясь только соглашениями фреймворка, приводит к нагромождению кода в моделях, контроллера.&#x000A;В книге даются простые и полезные советы как этого избежать, чтобы независимо от размера вашего проекта, его также легко было поддерживать, как на первых этапах.</p>&#x000A;&#x000A;<h3 id="section">Организация контроллеров</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Держите CRUD методы легкими, выносите код в отдельные методы.</li>&#x000A;  <li>Используйте ActiveResource для типичных CRUD контроллеров. Недостаток — добавляет магии в код.</li>&#x000A;  <li>Выносите код итераций по модели (условную валидацию, рассылку уведомлений и т.д) в объекты ActiveRecord::Base или ActiveType::Object. (Паттерн FormObject).</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="section-1">Организация моделей</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Используйте композицию (например, выносите методы поиска и Note в класс Note::Search).</li>&#x000A;  <li>Держите связанные модели под одним неймспейсом. Также контроллеры и шаблоны.</li>&#x000A;  <li>Если одна модель используется с разным уровнем доступа и валидацией, создавайте для каждого случая отдельные модели (User -&gt; User::AsSignIn, User::AsAdminEdit).</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="section-2">Организация шаблонов</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Если есть директория с именем во множественном числе и единственном — объедините их.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="css">Организация CSS</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Используйте БЭМ именование (блоки, элементы, модификаторы) .</li>&#x000A;  <li>Ведите style-guide (hologram gem умеет генерировать по комментариям).</li>&#x000A;  <li>Блок не должен быть связан с другими блоками.</li>&#x000A;  <li>Не обязательно задавать классы в компонентных тегах (table, dl, ul).</li>&#x000A;  <li>Используйте :before и :after, где нужен дополнительный элемент. Вместо написания дополнительного тега.</li>&#x000A;  <li>Используйте media-queries вместо генерации модификаторов на js.</li>&#x000A;  <li>Для user-generated текстов задавайте стили по-умолчанию, чтобы не приходилось добавлять классы к тегам.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="gems">Советы по выбору gems</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Не используйте первые мажорные версии. Переходите, когда минорная версия дойдет хотя бы до 3й (х.х.3).</li>&#x000A;  <li>Гемы должны быть качественным: хороший код, покрытие тестами, регулярные коммиты.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="section-3">Выбор базы данных</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>Критерии выбора: стабилен при нагрузках, свободное распространение, устойчивость при отказе железа, имеется развитый gem-адаптер (binding gem), выполняется бекап без блокировок, высокая производительность, большое коммьюнити.</li>&#x000A;  <li>Прежде чем добавлять новое хранилище, посмотрите, может быть уже подойдут уже используемое.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 id="section-4">Организация тестов</h3>&#x000A;&#x000A;<ul>&#x000A;  <li>В первую очередь пишите юнит-тесты. Они быстрые и простые в поддержке.</li>&#x000A;  <li>На каждый экран должен быть хотя бы один простой интеграционный тест.</li>&#x000A;  <li>100% покрытие тестами нецелесообразно, вы сами должны определить необходимый уровень.</li>&#x000A;  <li>Дублирование кода в тестах не всегда плохо. Важнее наглядность и гибкость к изменениям.</li>&#x000A;  <li>Если вы сомневаетесь писать или не писать определенный тест — напишите.</li>&#x000A;  <li>Перед модификацией древнего кода, покройте удачные сценарии тестами (happy paths).</li>&#x000A;</ul>
        </section>
      </article>
    </section>
    <script src="/javascripts/application.js" type="text/javascript"></script>
  </body>
</html>

